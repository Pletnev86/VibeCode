# Переключение между LM Studio и OpenRouter

## Где переключать провайдер

### Способ 1: Через UI (Рекомендуется)

1. **Запустите приложение:**
   ```bash
   npm start
   ```

2. **В боковой панели найдите секцию "AI Провайдер":**
   - Радио-кнопка "LM Studio (локальный)" - для локальных моделей
   - Радио-кнопка "OpenRouter (API)" - для внешних моделей через API

3. **Выберите нужный провайдер:**
   - Переключение происходит мгновенно
   - Система покажет сообщение о переключении
   - Статус обновится в заголовке

### Способ 2: Через конфигурацию

**Файл:** `config.json`

```json
{
  "ai": {
    "providers": {
      "lmStudio": {
        "enabled": true,  // true = включен, false = выключен
        ...
      },
      "openRouter": {
        "enabled": false,  // true = включен, false = выключен
        "apiKey": "Site_II_Marketing_Telegram_@ChatIIMarketing_bot:sk-or-v1-...",
        ...
      }
    }
  }
}
```

**Примечание:** Если оба провайдера включены, приоритет имеет выбор в UI.

---

## Настройка OpenRouter

### API Ключ

API ключ уже настроен в `config.json`:
```
Site_II_Marketing_Telegram_@ChatIIMarketing_bot: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
```

### Доступные модели OpenRouter

В конфигурации настроены следующие модели:
- `gpt4` → `openai/gpt-4o-mini` (по умолчанию)
- `claude` → `anthropic/claude-3.5-sonnet`
- `deepseek` → `deepseek/deepseek-chat`

Вы можете добавить другие модели в `config.json` в секции `openRouter.models`.

---

## Как работает переключение

### Приоритет провайдеров:

1. **Если выбран OpenRouter в UI:**
   - Система пытается использовать OpenRouter
   - При ошибке → fallback на LM Studio
   - При недоступности LM Studio → ошибка

2. **Если выбран LM Studio в UI:**
   - Система использует LM Studio
   - При ошибке → fallback на OpenRouter (если включен)
   - При недоступности обоих → ошибка

### Автоматический fallback:

Система автоматически переключается на другой провайдер при ошибках:
- LM Studio недоступен → пробует OpenRouter
- OpenRouter недоступен → пробует LM Studio
- Оба недоступны → ошибка

---

## Примеры использования

### Пример 1: Использование OpenRouter для сложных задач

1. Переключите на "OpenRouter (API)" в UI
2. Отправьте запрос: "Создай сложную архитектуру для микросервисов"
3. Система использует GPT-4 через OpenRouter

### Пример 2: Использование LM Studio для быстрых ответов

1. Переключите на "LM Studio (локальный)" в UI
2. Отправьте запрос: "Объясни что такое REST API"
3. Система использует локальный DeepSeek

### Пример 3: Программное переключение

```javascript
// В коде можно указать провайдер через опции
const response = await router.sendRequest('Запрос', {
  useOpenRouter: true  // Принудительно использовать OpenRouter
});
```

---

## Преимущества каждого провайдера

### LM Studio (локальный)
- ✅ Бесплатно
- ✅ Работает офлайн
- ✅ Быстрые ответы (если модель загружена)
- ✅ Приватность данных
- ⚠️ Требует загрузки моделей
- ⚠️ Ограниченные возможности моделей

### OpenRouter (API)
- ✅ Доступ к мощным моделям (GPT-4, Claude)
- ✅ Не требует локальных ресурсов
- ✅ Всегда актуальные модели
- ⚠️ Требует интернет
- ⚠️ Может быть медленнее
- ⚠️ Использует API ключ (лимиты)

---

## Рекомендации

1. **Для разработки:** Используйте LM Studio (быстро, бесплатно)
2. **Для сложных задач:** Используйте OpenRouter (мощные модели)
3. **Для приватности:** Используйте LM Studio (данные не уходят в интернет)
4. **Для скорости:** Используйте LM Studio (если модель загружена)

---

## Устранение проблем

### OpenRouter не работает

1. Проверьте интернет-соединение
2. Проверьте API ключ в `config.json`
3. Проверьте баланс на OpenRouter
4. Проверьте логи в консоли

### LM Studio не работает

1. Убедитесь, что LM Studio запущен
2. Проверьте, что сервер слушает на порту 1234
3. Проверьте, что модели загружены
4. Проверьте логи в консоли

---

*Документ создан для помощи в переключении между провайдерами*



